#: import YAXIS_WIDTH smart_house_ui.panels.sport.YAXIS_WIDTH

<SportPanel@Panel+SportWidget>:
    pos: 0, 0
    ScreenManager:
        id: sm
        Screen:
            name: 'main'
            size: root.size
            pos: 0, 0

            Label:
                id: total_distance
                size_hint: 0.8, 0.2
                pos_hint: {'x': 0.1, 'top': 0.9}
                text: '--/--'
                font_size: 20
                opacity: 0

            StencilView:
                pos: 0, 0
                size: YAXIS_WIDTH, self.parent.height
                size_hint: None, None

                Image:
                    id: graph_vertical_axis
                    pos: 0, 0

            StencilView:
                pos: YAXIS_WIDTH, 0
                size: self.parent.width-YAXIS_WIDTH, self.parent.height
                size_hint: None, None

                ScatterLayout:
                    pos: 0, 0
                    size: self.parent.size

                    do_scale: False
                    do_rotate: False
                    do_translation_y: False

                    Image:
                        id: weight_graph
                        size: self.parent.width-20, self.parent.height

                        pos: 20, 0


            ImageButton:
                size_hint: None, None
                size: 30, 30
                pos: root.width - 5 - self.width, root.height - self.height - 5

                source: 'static/plus2.png'

                on_press:
                    sm.current = 'add_data'

        Screen:
            name: 'add_data'
            id: add_data_layout

            size_hint: 1, 1
            pos: 0, 0

            on_pre_enter:
                weight_slider.value = root.last_weight or 90

            ImageButton:
                id: cancel_button
                source: 'static/cancel.png'

                size_hint: 0.2, 0.2
                pos_hint: {'x': 0.3, 'y': 0.1}

                on_press:
                    sm.current = 'main'

            ImageButton:
                size_hint: 0.3, 0.3
                pos_hint: {'x': 0, 'y': 0.6}
                source: 'static/play_inv.png'

                on_press:
                    weight_slider.value = max(weight_slider.min, weight_slider.value - weight_slider.step)

            Label:
                size_hint: 0.4, 0.3
                pos_hint: {'x': 0.3, 'y': 0.6}
                text: '%.1f' % weight_slider.value
                font_size: 46
                bold: True

            ImageButton:
                size_hint: 0.3, 0.3
                pos_hint: {'x': 0.7, 'y': 0.6}
                source: 'static/play.png'

                on_press:
                    weight_slider.value = min(weight_slider.max, weight_slider.value + weight_slider.step)

            Slider:
                id: weight_slider

                size_hint: 0.9, 0.2
                pos_hint: {'x': 0.05, 'y': 0.35}

                min: 75
                max: 95
                step: 0.1

            ImageButton:
                id: add_button
                source: 'static/ok.png'

                size_hint: 0.2, 0.2
                pos_hint: {'x': 0.5, 'y': 0.1}

                on_press:
                    root.save_weight_value(weight_slider.value)
                    sm.current = 'main'
